import{d as g,f as h,i as D,o as i,c as u,w as F,v as L,j as d,a as e,F as B,k as U,t as o,q as R,l as I,m as _,e as z,B as f,u as E,L as P,z as q}from"./index.5034234a.js";import{_ as J}from"./DashboardLayout.5f126d2f.js";import{B as b}from"./BackendService.c5565f7c.js";import{L as T}from"./LoadingAnimation.44dea025.js";import"./plugin-vue_export-helper.21dcd24c.js";const Y=e("option",{disabled:"",selected:""},"Select Mechanic",-1),G=["value"],H={class:"flex justify-end space-x-2 py-2"},j=g({__name:"SelectMechanic",props:{editableMech:{type:Boolean}},emits:["selected","assign-mechanic","cancel"],setup(r,{emit:m}){const t=r;let c=h(0),s=h([]);return D(async()=>{const a=await b.getMechanics();s.value=a==null?void 0:a.data}),(a,l)=>(i(),u(B,null,[F(e("select",{onChange:l[0]||(l[0]=n=>m("selected",d(c))),"onUpdate:modelValue":l[1]||(l[1]=n=>R(c)?c.value=n:c=n),class:I(`select select-bordered w-full ${t.editableMech?"":"hidden"} `),id:"selectMechanic"},[Y,(i(!0),u(B,null,U(d(s),n=>(i(),u("option",{key:n.id,value:n.id},o(n.firstName)+" "+o(n.lastName),9,G))),128))],34),[[L,d(c)]]),e("div",H,[e("button",{onClick:l[2]||(l[2]=n=>m("assign-mechanic")),class:"btn btn-sm"},o(r.editableMech?"Save":"Assign Mechanic"),1),t.editableMech?(i(),u("button",{key:0,onClick:l[3]||(l[3]=n=>m("cancel")),class:"btn btn-sm"},"Cancel")):_("",!0)])],64))}}),K={id:"appointment",class:"grid grid-cols-6 gap-6 shadow-lg p-6"},O=e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16l-4-4m0 0l4-4m-4 4h18"})],-1),Q=[O],W=e("p",{class:"text-2xl my-3 text-center font-bold col-span-6"},"Appointment Information",-1),X={class:"col-span-3 md:col-span-2"},Z=e("label",{for:"full-name",class:"block text-sm font-medium text-gray-700"},"Customer",-1),ee={class:"h-10 flex px-3 items-center bg-gray-300 rounded text-black font-medium"},te={class:"col-span-3 md:col-span-2"},se=e("label",{for:"full-name",class:"block text-sm font-medium text-gray-700"},"Mobile",-1),ne={class:"h-10 flex px-3 items-center bg-gray-300 rounded text-black font-medium"},oe={class:"col-span-6 md:col-span-2"},ae=e("label",{for:"full-name",class:"block text-sm font-medium text-gray-700"},"Email",-1),le={class:"h-10 flex px-3 items-center bg-gray-300 rounded text-black font-medium"},ce={class:"col-span-6 md:col-span-3"},ie=e("label",{for:"full-name",class:"block text-sm font-medium text-gray-700"},"Vehicle",-1),de={class:"h-10 flex px-3 items-center bg-gray-300 rounded text-black font-medium"},me={class:"col-span-6 md:col-span-3"},re=e("label",{for:"full-name",class:"block text-sm font-medium text-gray-700"},"Suggested Date",-1),pe={class:"h-10 flex px-3 items-center bg-gray-300 rounded text-black font-medium"},ue={class:"col-span-6"},fe=e("label",{for:"full-name",class:"block text-sm font-medium text-gray-700"},"Problem Description",-1),he={class:"h-10 flex px-3 items-center bg-gray-300 rounded text-black font-medium"},_e={class:"col-span-6"},be=e("label",{for:"full-name",class:"block text-sm font-medium text-gray-700"},"Street Address",-1),ge={class:"h-10 flex px-3 items-center bg-gray-300 rounded text-black font-medium"},xe={class:"col-span-6 md:col-span-3"},ke=e("label",{for:"full-name",class:"block text-sm font-medium text-gray-700"},"City/Town",-1),ve={class:"h-10 flex px-3 items-center bg-gray-300 rounded text-black font-medium"},ye={class:"col-span-6 md:col-span-3"},Me=e("label",{for:"full-name",class:"block text-sm font-medium text-gray-700"},"Parish",-1),$e={class:"h-10 flex px-3 items-center bg-gray-300 rounded text-black font-medium"},we={class:"col-span-6 md:col-span-3"},Ce=e("label",{for:"full-name",class:"block text-sm font-medium text-gray-700"},"Status",-1),Ae={class:"h-10 flex px-3 items-center bg-gray-300 rounded text-black font-medium"},Se={class:"col-span-6 md:col-span-3"},Ne=e("label",{for:"full-name",class:"block text-sm font-medium text-gray-700"},"Assigned Mechanic",-1),Be={class:"col-span-6 flex justify-end"},De={name:"AppointmentInformation",components:{SelectMechanic:j}},V=g({...De,props:{appointment:null},emits:["assignmechanic"],setup(r,{emit:m}){const t=r,c=z(),s=h(!1);function a(){s.value&&m("assignmechanic"),s.value=!s.value}function l(n){console.log(n),t.appointment.assignedMechId=n}return(n,p)=>{var x,k,v,y,M,$,w,C,A;return i(),u("section",K,[e("button",{class:"btn btn-sm max-w-fit",onClick:p[0]||(p[0]=S=>n.$router.back())},Q),W,e("div",X,[Z,e("p",ee,o(`${(x=t.appointment.customer)==null?void 0:x.firstName} ${(k=t.appointment.customer)==null?void 0:k.lastName}`),1)]),e("div",te,[se,e("p",ne,o((v=t.appointment.customer)==null?void 0:v.phoneNumber),1)]),e("div",oe,[ae,e("p",le,o((y=t.appointment.customer)==null?void 0:y.email),1)]),e("div",ce,[ie,e("p",de,o(`${(M=t.appointment.vehicle)==null?void 0:M.year} ${($=t.appointment.vehicle)==null?void 0:$.make} ${(w=t.appointment.vehicle)==null?void 0:w.model}`),1)]),e("div",me,[re,e("p",pe,o(n.$parseDate(t.appointment.suggestedDate)),1)]),e("div",ue,[fe,e("p",he,o(t.appointment.problemDescription),1)]),e("div",_e,[be,e("p",ge,o(t.appointment.streetAddress),1)]),e("div",xe,[ke,e("p",ve,o(t.appointment.town),1)]),e("div",ye,[Me,e("p",$e,o(t.appointment.parish),1)]),e("div",we,[Ce,e("p",Ae,o(t.appointment.fulfilled?"Fulfilled":"Not Fulfilled"),1)]),e("div",Se,[Ne,e("p",{class:I(`h-10 flex px-3 items-center bg-gray-300 rounded text-black font-medium ${s.value?"hidden":""}`)},o(t.appointment.assignedMech?`${(C=t.appointment.assignedMech)==null?void 0:C.firstName} ${(A=t.appointment.assignedMech)==null?void 0:A.lastName}`:"Unassigned"),3),d(c).isManager?(i(),f(j,{key:0,onCancel:p[1]||(p[1]=S=>s.value=!1),onAssignMechanic:a,onSelected:l,editableMech:s.value},null,8,["editableMech"])):_("",!0)]),e("div",Be,[e("button",{class:"btn btn-ghost bg-ourYellow",onClick:p[2]||(p[2]=S=>{var N;return n.$router.push(`/dashboard/createjob/${(N=r.appointment)==null?void 0:N.id}`)})},"Create Job")])])}}}),Ie={name:"AppointmentView",components:{AppointmentInformation:V}},Re=g({...Ie,setup(r){E();const m=P(),t=h();async function c(){const s=await b.updateAppointment(t.value);t.value=s==null?void 0:s.data,console.log(s==null?void 0:s.data)}return D(async()=>{const s=parseInt(m.params.id),a=await b.getAppointment(s);t.value=a==null?void 0:a.data}),(s,a)=>(i(),f(J,null,{content:q(()=>[d(t)?_("",!0):(i(),f(T,{key:0})),d(t)?(i(),f(V,{onAssignmechanic:c,appointment:d(t),key:d(t).id},null,8,["appointment"])):_("",!0)]),_:1}))}});export{Re as default};
